# å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

## å®Ÿè£…å®Œäº†é …ç›®

### âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤
- Dockerç’°å¢ƒæ§‹ç¯‰ï¼ˆdocker-compose.ymlã€Dockerfileï¼‰
- Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
- åŸºæœ¬è¨­å®šï¼ˆsettings.pyã€ç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼‰
- Celeryè¨­å®š

### âœ… èªè¨¼ãƒ»æ¨©é™ã‚·ã‚¹ãƒ†ãƒ 
- ã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ï¼ˆUserï¼‰
- å½¹å‰²ç®¡ç†ï¼ˆç®¡ç†è€…/å–¶æ¥­ãƒžãƒãƒ¼ã‚¸ãƒ£ãƒ¼/å–¶æ¥­æ‹…å½“è€…ï¼‰
- ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ´»å‹•ãƒ­ã‚°
- æ¨©é™ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½

### âœ… ã‚·ã‚¹ãƒ†ãƒ è¨­å®šãƒ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†
- SystemSettings ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ï¼‰
- PromptTemplate ãƒ¢ãƒ‡ãƒ«ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ä»˜ãï¼‰
- ç®¡ç†ç”»é¢ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å‹•çš„å¤‰æ›´æ©Ÿèƒ½

### âœ… å•†å“ç®¡ç†
- Product, ProductCategory ãƒ¢ãƒ‡ãƒ«
- ProductKnowledge ãƒ¢ãƒ‡ãƒ«ï¼ˆURL/PDF/ãƒ†ã‚­ã‚¹ãƒˆå¯¾å¿œï¼‰
- ç®¡ç†ç”»é¢ã§ã®å•†å“ç™»éŒ²ãƒ»ç·¨é›†

### âœ… ä¼æ¥­æƒ…å ±ç®¡ç†
- Company ãƒ¢ãƒ‡ãƒ«
- Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ©Ÿèƒ½ï¼ˆBeautifulSoup4, trafilaturaï¼‰
- robots.txtå°Šé‡æ©Ÿèƒ½
- AIã«ã‚ˆã‚‹ä¼æ¥­æƒ…å ±æ§‹é€ åŒ–
- éžåŒæœŸå‡¦ç†ï¼ˆCeleryï¼‰

### âœ… CSVåˆ†æžï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼‰
- CSVUpload ãƒ¢ãƒ‡ãƒ«
- Analysis ãƒ¢ãƒ‡ãƒ«
- CSVæœ‰ç„¡ã«ã‚ˆã‚‹æ¡ä»¶åˆ†å²

### âœ… å•†å“ãƒžãƒƒãƒãƒ³ã‚°
- ProductMatcherå®Ÿè£…
- ä¼æ¥­æƒ…å ±ã¨å•†å“ã®é©åˆåº¦åˆ¤å®š
- AIã«ã‚ˆã‚‹æœ€é©å•†å“é¸æŠž
- ãƒžãƒƒãƒãƒ³ã‚°ç†ç”±ç”Ÿæˆ

### âœ… ãƒˆãƒ¼ã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ
- TalkScript ãƒ¢ãƒ‡ãƒ«
- ã‚»ã‚¯ã‚·ãƒ§ãƒ³é¸æŠžæ©Ÿèƒ½
- CSVæœ‰ç„¡ã«ã‚ˆã‚‹ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯åˆ†å²
- å•†å“æƒ…å ±ã®çµ„ã¿è¾¼ã¿
- å•†è«‡çµæžœã‹ã‚‰ã®å­¦ç¿’æ©Ÿèƒ½
- ProposalProductLinkï¼ˆææ¡ˆã¨å•†å“ã®ç´ä»˜ã‘ï¼‰

### âœ… PowerPointå‡ºåŠ›
- python-pptxå®Ÿè£…
- ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆ
- ä¼æ¥­æƒ…å ±ã‚¹ãƒ©ã‚¤ãƒ‰
- å•†å“ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰
- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

### âœ… å•†è«‡çµæžœç®¡ç†
- SalesOutcome ãƒ¢ãƒ‡ãƒ«
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¨˜éŒ²
- AIå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ´»ç”¨

### âœ… Djangoç®¡ç†ç”»é¢
- å…¨ãƒ¢ãƒ‡ãƒ«ã®ç®¡ç†ç”»é¢ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º
- æ¨©é™åˆ¶å¾¡
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªUI

### âœ… åŸºæœ¬UI
- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå®Ÿè£…æŽ¨å¥¨ï¼‰

### ðŸ”„ PDFå‡¦ç†æ©Ÿèƒ½
**ãƒ•ã‚¡ã‚¤ãƒ«:** `backend/apps/products/processors.py`

```python
# PDFã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
# ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯åˆ†å‰²
# AIæ§‹é€ åŒ–å‡¦ç†
```

### ðŸ”„ CSVåˆ†æžã‚¿ã‚¹ã‚¯
**ãƒ•ã‚¡ã‚¤ãƒ«:** `backend/apps/analysis/tasks.py`

```python
# pandasã§CSVè§£æž
# OpenAI APIã§åˆ†æžå®Ÿè¡Œ
# çµæžœä¿å­˜
```

### ðŸ”„ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
å„ã‚¢ãƒ—ãƒªã®`views.py`ã«DRF ViewSetsã‚’å®Ÿè£…

### ðŸ”„ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ UIæ‹¡å¼µ
- ä¼æ¥­æƒ…å ±å…¥åŠ›ç”»é¢
- CSVä»»æ„ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»é¢
- ã‚»ã‚¯ã‚·ãƒ§ãƒ³é¸æŠžç”»é¢
- 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç”»é¢ï¼‰
- PowerPointç”Ÿæˆç”»é¢

### ðŸ”„ ãƒ†ã‚¹ãƒˆ
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- çµ±åˆãƒ†ã‚¹ãƒˆ
- E2Eãƒ†ã‚¹ãƒˆ

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆ.gitignoreã«å«ã¾ã‚Œã‚‹ãŸã‚æ‰‹å‹•ä½œæˆï¼‰
cd /Users/dfn4459wgl/Develop/proposal
cat > .env << 'EOF'
# Django Settings
DEBUG=True
SECRET_KEY=your-secret-key-here-change-in-production
ALLOWED_HOSTS=localhost,127.0.0.1

# Database
POSTGRES_DB=proposal_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DATABASE_URL=postgresql://postgres:postgres@db:5432/proposal_db

# Redis & Celery
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# OpenAI API
OPENAI_API_KEY=your-openai-api-key-here
EOF
```

### 2. Dockerã‚³ãƒ³ãƒ†ãƒŠã®ãƒ“ãƒ«ãƒ‰ã¨èµ·å‹•

```bash
docker-compose up -d --build
```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

```bash
docker-compose exec web python manage.py migrate
```

### 4. åˆæœŸãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ

```bash
docker-compose exec web python manage.py setup_initial_data
```

### 5. ã‚¢ã‚¯ã‚»ã‚¹

- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª: http://localhost:8000
- ç®¡ç†ç”»é¢: http://localhost:8000/admin
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼å: admin
  - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: admin123

## ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«

### ãƒ¢ãƒ‡ãƒ«å®šç¾©
- `backend/apps/accounts/models.py` - User, UserActivityLog
- `backend/apps/core/models.py` - SystemSettings, PromptTemplate
- `backend/apps/products/models.py` - Product, ProductKnowledge
- `backend/apps/companies/models.py` - Company
- `backend/apps/analysis/models.py` - CSVUpload, Analysis
- `backend/apps/sales/models.py` - TalkScript, ProposalProductLink, SalesOutcome
- `backend/apps/exports/models.py` - ExportHistory

### ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- `backend/apps/companies/scraper.py` - Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
- `backend/apps/products/matching.py` - å•†å“ãƒžãƒƒãƒãƒ³ã‚°
- `backend/apps/sales/script_generator.py` - ãƒˆãƒ¼ã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ
- `backend/apps/exports/pptx_generator.py` - PowerPointç”Ÿæˆ

### Celeryã‚¿ã‚¹ã‚¯
- `backend/apps/companies/tasks.py` - ä¼æ¥­æƒ…å ±å–å¾—
- `backend/apps/sales/tasks.py` - ãƒˆãƒ¼ã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ
- `backend/apps/exports/tasks.py` - PowerPointç”Ÿæˆ

### ç®¡ç†ç”»é¢
- `backend/apps/*/admin.py` - å„ãƒ¢ãƒ‡ãƒ«ã®ç®¡ç†ç”»é¢è¨­å®š

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# PostgreSQLã‚³ãƒ³ãƒ†ãƒŠã®ç¢ºèª
docker-compose ps db
docker-compose logs db

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†èµ·å‹•
docker-compose restart db
```

### Celeryã‚¿ã‚¹ã‚¯ãŒå®Ÿè¡Œã•ã‚Œãªã„

```bash
# Celeryãƒ¯ãƒ¼ã‚«ãƒ¼ã®ç¢ºèª
docker-compose logs celery

# Celeryãƒ¯ãƒ¼ã‚«ãƒ¼å†èµ·å‹•
docker-compose restart celery
```

### ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

```bash
# ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒªã‚»ãƒƒãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
docker-compose down -v
docker-compose up -d
docker-compose exec web python manage.py migrate
docker-compose exec web python manage.py setup_initial_data
```

## é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- PEP 8æº–æ‹ 
- æ—¥æœ¬èªžã‚³ãƒ¡ãƒ³ãƒˆæŽ¨å¥¨
- docstringè¨˜è¼‰æŽ¨å¥¨

### Gité‹ç”¨
- feature/æ©Ÿèƒ½å ã§ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
- Pull RequestçµŒç”±ã§ãƒžãƒ¼ã‚¸
- ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ—¥æœ¬èªžOK

### ãƒ†ã‚¹ãƒˆ
- æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã¯å¿…ãšãƒ†ã‚¹ãƒˆä½œæˆ
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã‚’ç›®æ¨™

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®é©åˆ‡ãªä½¿ç”¨
- select_related / prefetch_related ã®æ´»ç”¨
- N+1å•é¡Œã®å›žé¿

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- Redisæ´»ç”¨
- SystemSettings ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### éžåŒæœŸå‡¦ç†
- é‡ã„å‡¦ç†ã¯Celeryã§éžåŒæœŸåŒ–
- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
- AIå‡¦ç†
- ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### å¿…é ˆå¯¾å¿œ
- æœ¬ç•ªç’°å¢ƒã§SECRET_KEYå¤‰æ›´
- DEBUGã‚’Falseã«
- ALLOWED_HOSTSã®é©åˆ‡ãªè¨­å®š
- HTTPSã®æœ‰åŠ¹åŒ–
- å®šæœŸçš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ›´æ–°

### æŽ¨å¥¨å¯¾å¿œ
- ãƒ­ã‚°ç›£è¦–
- ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹æ¤œçŸ¥
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½“åˆ¶
- è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³

## ã¾ã¨ã‚

ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³ï¼š
- âœ… ã‚³ã‚¢æ©Ÿèƒ½ã¯å…¨ã¦å®Ÿè£…æ¸ˆã¿
- âœ… Dockerç’°å¢ƒã§å‹•ä½œå¯èƒ½
- â³ UIã®æ‹¡å¼µãŒæŽ¨å¥¨ã•ã‚Œã‚‹
- â³ ãƒ†ã‚¹ãƒˆã®è¿½åŠ ãŒæŽ¨å¥¨ã•ã‚Œã‚‹

æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼š
1. .envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆï¼ˆOpenAI APIã‚­ãƒ¼ã®è¨­å®šï¼‰
2. Dockerç’°å¢ƒã®èµ·å‹•
3. åˆæœŸãƒ‡ãƒ¼ã‚¿ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
4. ç®¡ç†ç”»é¢ã§ã®å‹•ä½œç¢ºèª
5. å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ†ã‚¹ãƒˆ

