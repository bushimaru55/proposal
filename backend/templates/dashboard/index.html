{% extends 'base.html' %}

{% block title %}ダッシュボード - AI営業支援システム{% endblock %}

{% block extra_css %}
<style>
    .dashboard-header {
        background: white;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .dashboard-header h1 {
        margin-bottom: 10px;
    }
    .user-info {
        color: #666;
    }
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }
    .card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .card h2 {
        margin-bottom: 15px;
        color: #333;
    }
    .card p {
        color: #666;
        margin-bottom: 15px;
    }
    .nav-menu {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .nav-menu h2 {
        margin-bottom: 15px;
    }
    .nav-menu ul {
        list-style: none;
    }
    .nav-menu li {
        margin-bottom: 10px;
    }
    .nav-menu a {
        display: block;
        padding: 10px 15px;
        background: #f8f9fa;
        color: #333;
        text-decoration: none;
        border-radius: 4px;
        transition: background 0.3s;
    }
    .nav-menu a:hover {
        background: #e9ecef;
    }
    .announcement {
        background: #fff3cd;
        border: 1px solid #ffc107;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-header">
        <h1>ダッシュボード</h1>
        <div class="user-info">
            ようこそ、{{ user.get_full_name|default:user.username }}さん（{{ user.get_role_display }}）
            <a href="{% url 'accounts:logout' %}" style="margin-left: 20px;">ログアウト</a>
        </div>
    </div>
    
    {% if system_announcement %}
    <div class="announcement">
        <strong>お知らせ：</strong> {{ system_announcement }}
    </div>
    {% endif %}
    
    <div class="dashboard-grid">
        <div class="card">
            <h2>📊 データ分析</h2>
            <p>CSVファイルをアップロードしてAI分析を実行</p>
            <a href="/admin/analysis/csvupload/" class="btn">分析開始</a>
        </div>
        
        <div class="card">
            <h2>🏢 企業情報</h2>
            <p>企業URLから情報を自動収集</p>
            <a href="/admin/companies/company/" class="btn">企業管理</a>
        </div>
        
        <div class="card">
            <h2>📦 商品管理</h2>
            <p>提案する商品の情報を登録・管理</p>
            <a href="/admin/products/product/" class="btn">商品管理</a>
        </div>
        
        <div class="card">
            <h2>💬 トークスクリプト</h2>
            <p>AI生成の営業トークスクリプトを作成</p>
            <a href="/admin/sales/talkscript/" class="btn">スクリプト管理</a>
        </div>
        
        <div class="card">
            <h2>📈 商談結果</h2>
            <p>商談の結果を記録してAI学習に活用</p>
            <a href="/admin/sales/salesoutcome/" class="btn">結果記録</a>
        </div>
        
        <div class="card">
            <h2>📄 エクスポート</h2>
            <p>PowerPoint資料を生成・ダウンロード</p>
            <a href="/admin/exports/exporthistory/" class="btn">エクスポート履歴</a>
        </div>
    </div>
    
    {% if user.is_admin %}
    <div class="nav-menu">
        <h2>🔧 管理者メニュー</h2>
        <ul>
            <li><a href="/admin/core/systemsettings/">システム設定</a></li>
            <li><a href="/admin/core/prompttemplate/">プロンプト管理</a></li>
            <li><a href="/admin/accounts/user/">ユーザー管理</a></li>
            <li><a href="/admin/">Django管理画面</a></li>
        </ul>
    </div>
    {% endif %}
</div>
{% endblock %}

